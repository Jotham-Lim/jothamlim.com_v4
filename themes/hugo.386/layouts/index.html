{{ define "main" }}

<div class="row-fluid navmargin">
    <div class="page-header">
        <h1>{{ .Site.Params.mainpagetitle }}</h1>
    </div>
</div>

<div class="row-fluid">
    <div class="span9 bs-docs-sidebar">
        <p class="lead">{{ .Site.Params.mainpagesubtitle }}</p>
        <p></p>
        <p>{{ .Site.Params.mainpagedesc }}</p>
        <p></p>
        <hr class="soften">
        <p></p>
        <h1> Recent {{ i18n "postslist" }}</h1>
        <ul>
            {{ range first 7 .Site.RegularPages }}
            {{ if eq .Type "post" }}
            <li><a href="{{ .Permalink }}">{{ .Date.Format "2006-01-02" }} | {{ .Title }}</a></li>
            {{ end }}
            {{ end }}
        </ul>
        <p></p>
        <hr>
        <p></p>
        <h1>Recent Status Updates</h1>
        <ul>
            {{ range first 5 .Site.RegularPages }}
            {{ if eq .Type "micropost" }}
            <a href="{{ .Permalink }}">
                {{ $currentDate := now }}
                {{ $postDate := .Date }}
        
                {{ $duration := $currentDate.Sub $postDate }}
                {{ $hoursAgo := $duration.Hours | int }}
        
                {{ if ge $hoursAgo 24 }}
                    {{ $daysAgo := div $hoursAgo 24 }} 
                    {{ $daysAgo }} day{{ if ne $daysAgo 1 }}s{{ end }} ago
                {{ else }}
                    {{ $hoursAgo }} hours ago
                {{ end }}
            </a>
            {{ .Content }}
            {{ end }}
            {{ end }}
        </ul>
        <p></p>                   
    </div>
    <div class="span3 bs-docs-sidebar">
        <h1 class="nav nav-header">{{ i18n "category" }}</h1>
        <ul class="nav nav-list bs-docs-sidenav">
            <li>
                <a href="{{ .Site.BaseURL }}/post">Blog Posts</a>
            </li>
            <li>
                <a href="{{ .Site.BaseURL }}/micropost">Status Update</a>
            </li>
        </ul>
        <p></p>
        <h1 class="nav nav-header">{{ i18n "tags" }}</h1>
        <ul class="nav nav-list bs-docs-sidenav">
            {{ partial "tags.html" .}}
        </ul>
        <p></p>
    </div>
</div>

{{ end }}